<!doctype html>
<html>
   <head>
      <meta charset="utf-8" />
      <title>Protótipo2013-1</title>
   </head>
   <body>
   <h1>Protótipo2013-1</h1>
   <canvas id ="tela" width="800" height="600">Seu navegador não suporta canvas</canvas>
   <script>
   var tela = document.getElementById ("tela");
   //console.log("Ola mundo");
   //console.log(tela);
   var ctx = tela.getContext("2d");
   //ctx.fillRect(10, 10, 50, 50);
   /*
   ctx.moveTo(10,10);
   ctx.lineTo(20,20);
   for(var i = 0; i<200; i=i+10){
      ctx.moveTo(20,20);
      ctx.lineTo(100,i);
   }
   ctx.stroke();
   */
   var x = 70;
   var y = 80;
   var vy = 0;
   var ay = 30;
   var p1x = 700;
   var p1y = 200;
   function desenhaPersonagem() {
	   
	   ctx.beginPath();
	   ctx.arc(x,y,5,0,2*Math.PI);
	   ctx.closePath();
	   ctx.fillStyle="blue";
	   ctx.fill();
	   ctx.stroke();

	   ctx.save();
	   ctx.translate(x, y);
	   ctx.beginPath();
	   ctx.moveTo(0, -25);
	   ctx.lineTo(0, 25);   
	   ctx.lineTo(25, 50);
	   ctx.moveTo(0, 25);
	   ctx.lineTo(-25, 50);
	   ctx.moveTo(0,-5);      
	   ctx.lineTo(25,5);
	   ctx.moveTo(0,-5);
	   ctx.lineTo(-25,5);
	   ctx.moveTo(0,-25);
	   ctx.closePath();
	   ctx.stroke();

	   ctx.beginPath();
	   ctx.arc(0,-25,15,0,2*Math.PI);
	   ctx.closePath();
	   ctx.fillStyle="yellow";
	   ctx.fill();
	   ctx.stroke();
	   ctx.restore();
	}
   
   function desenhaParede2(){
	   ctx.beginPath();
	   ctx.fillStyle="brown";	
	   ctx.fillRect(20,250,150,50);
	   ctx.strokeRect(20,250,150,50);
	   ctx.closePath();
	}
	function limpaTela(){
	   ctx.beginPath();
	   ctx.fillStyle="white";	
	   ctx.fillRect(0,0,800,600);
	   ctx.strokeRect(0,0,800,600);
	   ctx.closePath();
	}
	
	function desenhaParede1() {
	    ctx.save();
		ctx.translate(p1x , p1y);
		ctx.fillStyle="brown";
		ctx.beginPath();
	    ctx.fillRect(-50,-50,100,100);
	    ctx.strokeRect(-50,-50,100,100);
  	    ctx.closePath();
		ctx.restore();
		
		ctx.beginPath();
	    ctx.arc(p1x,p1y,5,0,2*Math.PI);
	    ctx.closePath();
	    ctx.fillStyle="blue";
	    ctx.fill();
	    ctx.stroke();
	}
	var anterior = new Date();
	var agora = new Date();
	var dt = agora - anterior;
	console.log (dt);
	function passo(){
		agora = new Date();
		dt = (agora - anterior) / 1000;
		p1x-=120*dt;
		vy+=ay*dt;
		y+=vy*dt;
		limpaTela();
		desenhaPersonagem();
		desenhaParede1();
		desenhaParede2();
		console.log (dt);
		anterior = agora;
	}
	passo();
	window.setInterval(passo,5);
	
</script>
   </body>
</html>
